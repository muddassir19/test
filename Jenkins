pipeline{
    agent any

    stages {
        stage('Maven Build') {
          steps {
            sh 'mvn clean package'
          }
        }
        stage('Deploy  tomcat') {
          steps {
            sshagent(['tomcat-server']) {
              sh 'ssh -o StrictHostKeyChecking=no ' target/*.war ec2-user@172.31.11.20:/opt/tomcat8/webapps'
          }
          }
        }
    }
}